# Pyside_Calculator

一个基于 PySide6 开发，仿 Metro 风格的简易整型四则运算计算器。

© BiDuang 2022。

此项目由 Friendship Studio 管理维护

[Friendship Studio 隐私协议](https://wiki.friendship.org.cn/wiki/FriendshipWiki:Privacy)

----

## 项目信息

### 已实现特性

- 基础整型四则运算功能 (-10000 ~ 10000)
- 键盘直输、模拟按钮和触摸屏兼容
- 计算错误处理与设计外计算警告 (除0、丢失精度除法和长数据计算)
- 上次计算结果快速导入
- 模块与 OOP 结构封装

### 多平台兼容性

|平台|测试结果|
|:------:|:----:|
|Windows |  ✅ |
|macOS |  WIP   |
|Linux |  WIP  |

### 引用部件

FontAwesome © Fonticons, Inc.

### 致谢

AsakiRain 提供了 Pyside 语法支持、重构思路和程序检查  

mrcino 提供了 Python 语法意见

----

## 部署指南

### 运行环境

- Python 3.9+

### 安装依赖

使用 PyPi 包管理器安装 `PySide6` 依赖。

```bash
python -m pip install PySide6
```

### 运行程序

程序入口位于项目目录的 `main.py`，编译运行此文件即可。

----

## 使用指南

启动程序，首先程序会出现一个启动窗口，请稍等。

启动窗口结束后，即进入程序主界面 `MainWindow` ：

<img src="https://cdn.friendship.org.cn/LightPicture/2022/11/f8bf4435a770550b.png" width=50%>

若要开始计算任务，请先从键盘或模拟按钮输入被操作数。

如果需要修改被操作数，你可以点击橙色左箭头按钮或键盘按下 `BackSpace` 进行退格操作。

接着，在四个运算符号中选择一个。按下后，该操作符将高亮，且上一步输入的被操作数被移至淡绿色区域，表明程序已经接收你的输入并等待你的第二个计算操作数。

**请注意：计算器没有设计撤销运算功能，一旦你选择了运算模式，就不能再操作上一步的被操作数。**

输入完第二个操作数后，点击求和按钮或键盘点击回车，淡蓝色区域会出现结果。

不过，淡蓝色区域会在以下情况变为如下颜色：

- 红色：计算错误，你的计算可能正在尝试除零。
- 黄色：计算警告，有两个可能导致此情况：
  - 进行不能整除的除法运算，计算器会丢失小数部分结果 (丢失精度)
  - 进行超过6个字符的长数据计算，计算器在第一次进行此计算前会弹窗提示你，如果你选择忽略，则弹窗不再出现。但淡蓝色区域将永久变黄 (设计外警告)

对于 `计算错误` 只需点击 `AC` 按钮或键盘按下 `ESC` 即可重置计算器，但在此之前计算器会拒绝其他尝试计算的输入。

对于 `计算警告`，如果是 `丢失精度` 情况，重置不能整除的除法运算即可恢复正常。若是 `设计外警告`，则该警告将持续以提醒你计算器已经进入设计外的不安全模式，重启程序即可恢复。

完成一次成功的计算后，你会注意到结果区域右侧的灰背景白色向上箭头按钮变为水绿色。这代表载入上次计算结果功能已可用，点击此按钮或键盘输入 `~` 即可将上次计算的结果载入至操作数输入区。

绿色渐变背景且带有 `i` 标识的按钮是程序信息页面。点击打开后可查看程序版本与开发信息。

----

## 已设定快捷键

|快捷键|功能|
|:------:|:----:|
| 0-9 (兼容小键盘) |  数字输入 |
| + |  加法模式  |
| - |  减法模式  |
| * |  乘法模式  |
| / |  除法模式  |
| Enter (兼容小键盘) |  等于  |
| BackSpace |  删去操作数最后一位  |
| ESC |  重置计算器  |
| ~ |  加载上次运算结果  |
